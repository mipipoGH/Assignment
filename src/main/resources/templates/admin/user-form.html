<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${user.maKH != null} ? 'Sửa Khách hàng' : 'Thêm Khách hàng'">Form Khách hàng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
<div th:replace="~{layout :: layout(~{::content})}">
    <th:block th:fragment="content">

        <h2 class="mb-4" th:text="${user.maKH != null} ? 'Sửa Khách hàng' : 'Thêm Khách hàng'">Form Khách hàng</h2>

        <!-- Tạo biến actionUrl để chọn URL create/update -->
        <th:block th:with="actionUrl=${user.maKH != null} ? '/admin/users/update' : '/admin/users/create'">
            <form th:action="@{${actionUrl}}" th:object="${user}" method="post" class="needs-validation" novalidate>

                <div class="mb-3">
                    <label class="form-label">Mã KH</label>
                    <input type="text" th:field="*{maKH}" class="form-control"
                           th:attr="readonly=${user.maKH != null}" placeholder="Nhập mã khách hàng" required />
                </div>

                <div class="mb-3">
                    <label class="form-label">Họ tên</label>
                    <input type="text" th:field="*{hoTen}" class="form-control" placeholder="Nhập họ tên" required />
                </div>

                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" th:field="*{email}" class="form-control" placeholder="Nhập email" required />
                </div>

                <div class="mb-3">
                    <label class="form-label">SĐT</label>
                    <input type="text" th:field="*{sdt}" class="form-control" placeholder="Nhập số điện thoại" />
                </div>

                <div class="mb-3">
                    <label class="form-label">Ngày tạo</label>
                    <input type="text" class="form-control" readonly
                           th:value="${user.ngayTao != null} ? ${#temporals.format(user.ngayTao, 'dd/MM/yyyy')} : ${#temporals.format(T(java.time.LocalDate).now(), 'dd/MM/yyyy')}" />
                </div>

                <button type="submit" class="btn btn-success">
                    <i class="bi bi-save"></i> Lưu
                </button>
                <a th:href="@{/admin/users}" class="btn btn-secondary">Hủy</a>

            </form>
        </th:block>

    </th:block>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
