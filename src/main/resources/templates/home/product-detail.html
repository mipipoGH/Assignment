<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::content})}">
<th:block th:fragment="content">

    <style>
        .product-detail-container {
            padding: 2rem 0;
        }
        
        .product-image-container {
            background: var(--background);
            border-radius: var(--radius-xl);
            padding: 2rem;
            box-shadow: var(--shadow-md);
            text-align: center;
        }
        
        .product-main-image {
            width: 100%;
            max-width: 400px;
            height: 400px;
            object-fit: cover;
            border-radius: var(--radius-lg);
        }
        
        .product-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }
        
        .product-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 2rem;
        }
        
        .product-description {
            color: var(--text-secondary);
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--surface);
            border-radius: var(--radius-lg);
        }
        
        .btn-add-to-cart {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: var(--radius-lg);
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-add-to-cart:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            color: white;
        }
        
        .quantity-input {
            width: 100px;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            text-align: center;
            margin-right: 1rem;
        }
    </style>

    <div class="modern-container">
        <div class="product-detail-container">
            <div class="row g-5">
                <!-- Hình ảnh sản phẩm -->
                <div class="col-lg-6">
                    <div class="product-image-container">
                        <img th:src="@{/images/products/{id}.jpg(id=${product.maSP})}"
                             onerror="this.src='/images/products/' + this.getAttribute('data-product-id') + '.png'"
                             th:attr="data-product-id=${product.maSP}"
                             class="product-main-image"
                             th:alt="${product.tenSP}">
                    </div>
                </div>

                <!-- Thông tin sản phẩm -->
                <div class="col-lg-6">
                    <h1 class="product-title" th:text="${product.tenSP}">Tên sản phẩm</h1>

                    <div class="product-price" th:text="${#numbers.formatDecimal(product.donGia,0,'COMMA',0,'POINT')} + ' ₫'"></div>

                    <!-- Mô tả sản phẩm -->
                    <div class="product-description">
                        <div th:if="${product.maSP == 'SP01'}">
                            <strong>iPhone 15 Pro Max - Đỉnh cao công nghệ di động</strong><br><br>
                            iPhone 15 Pro Max mang đến trải nghiệm hoàn toàn mới với chip A17 Pro tiên tiến, camera chuyên nghiệp và thiết kế titan cao cấp. 
                            Với màn hình Super Retina XDR 6.7 inch, bạn sẽ được thưởng thức hình ảnh sắc nét và màu sắc sống động như chưa từng có.
                        </div>
                        <div th:if="${product.maSP == 'SP02'}">
                            <strong>Samsung Galaxy Tab S9 - Máy tính bảng cao cấp</strong><br><br>
                            Galaxy Tab S9 với màn hình Dynamic AMOLED 2X 11 inch mang đến trải nghiệm giải trí và làm việc tuyệt vời. 
                            Chip Snapdragon 8 Gen 2 mạnh mẽ xử lý mọi tác vụ từ đơn giản đến phức tạp một cách mượt mà.
                        </div>
                        <div th:if="${product.maSP == 'SP03'}">
                            <strong>MacBook Pro 14 inch M3 - Sức mạnh chuyên nghiệp</strong><br><br>
                            MacBook Pro 14 inch với chip M3 Pro mang đến hiệu suất vượt trội cho các tác vụ chuyên nghiệp. 
                            Màn hình Liquid Retina XDR 14.2 inch với độ sáng 1000 nits hiển thị màu sắc chính xác tuyệt đối.
                        </div>
                        <div th:if="${product.maSP == 'SP04'}">
                            <strong>ASUS ROG Strix G15 - Gaming laptop mạnh mẽ</strong><br><br>
                            ROG Strix G15 được trang bị CPU AMD Ryzen 9 và GPU RTX 4070 mang đến hiệu suất gaming đỉnh cao. 
                            Màn hình 15.6 inch 144Hz giúp bạn thưởng thức game với độ mượt tuyệt đối.
                        </div>
                        <div th:if="${product.maSP == 'SP05'}">
                            <strong>AirPods Pro (2nd generation) - Âm thanh hoàn hảo</strong><br><br>
                            AirPods Pro thế hệ 2 với chip H2 mang đến chất lượng âm thanh vượt trội và khử tiếng ồn chủ động 
                            gấp đôi thế hệ trước. Âm thanh không gian cá nhân hóa tạo trải nghiệm nghe nhạc đỉnh cao.
                        </div>
                        <div th:if="${product.maSP != 'SP01' && product.maSP != 'SP02' && product.maSP != 'SP03' && product.maSP != 'SP04' && product.maSP != 'SP05'}">
                            <strong>Sản phẩm công nghệ cao cấp</strong><br><br>
                            Sản phẩm được thiết kế với công nghệ tiên tiến, chất lượng cao và tính năng vượt trội. 
                            Mang đến trải nghiệm tuyệt vời cho người dùng với hiệu suất ổn định và độ bền cao.
                        </div>
                    </div>

                    <!-- Form thêm vào giỏ -->
                    <form th:action="@{/cart/add}" method="post" class="d-flex align-items-center mb-4">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <input type="hidden" name="maSP" th:value="${product.maSP}" />
                        
                        <input type="number" name="qty" class="quantity-input" value="1" min="1" max="10">
                        
                        <button class="btn-add-to-cart" type="submit">
                            <i class="bi bi-cart-plus me-2"></i>
                            Thêm vào giỏ hàng
                        </button>
                    </form>

                    <!-- Nút quay lại -->
                    <a th:href="@{/products}" class="btn-modern btn-outline">
                        <i class="bi bi-arrow-left me-2"></i>
                        Quay lại danh sách
                    </a>
                </div>
            </div>
        </div>
    </div>

</th:block>
</html>