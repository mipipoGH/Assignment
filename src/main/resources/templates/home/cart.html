<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::content})}">
<th:block th:fragment="content">

    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .page-wrapper {
            max-width: 1100px;
            margin: 60px auto;
            padding: 20px;
        }
        .glass-box {
            backdrop-filter: blur(18px);
            -webkit-backdrop-filter: blur(18px);
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            color: #fff;
        }
        table.table {
            color: #fff;
        }
        table.table thead th {
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            font-weight: 600;
        }
        table.table td, table.table th {
            border-color: rgba(255, 255, 255, 0.1) !important;
        }
        .btn-outline-danger {
            color: #ff6b6b;
            border-color: #ff6b6b;
        }
        .btn-outline-danger:hover {
            background: #ff6b6b;
            color: #fff;
        }
        .btn-success {
            background: #2ecc71;
            border: none;
        }
        .btn-success:hover {
            opacity: 0.85;
        }
        h3, h5, span.text-danger {
            color: #fff !important;
        }
    </style>

    <div class="page-wrapper">
        <div class="glass-box">
            <h3 class="mb-4 text-center fw-bold">
                <i class="bi bi-cart-check"></i> Giỏ hàng của bạn
            </h3>

            <!-- Nếu giỏ hàng trống -->
            <div th:if="${#lists.isEmpty(cart)}" class="text-center py-4">
                <i class="bi bi-emoji-frown display-5 d-block mb-3"></i>
                <h5>Giỏ hàng của bạn đang trống</h5>
                <a th:href="@{/san-pham}" class="btn btn-light mt-3">Mua sắm ngay</a>
            </div>

            <!-- Nếu có sản phẩm -->
            <div th:if="${!#lists.isEmpty(cart)}">
                <table class="table align-middle">
                    <thead>
                    <tr>
                        <th>Sản phẩm</th>
                        <th>Đơn giá</th>
                        <th>Số lượng</th>
                        <th>Tạm tính</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="item : ${cart}">
                        <td th:text="${item.tenSP}"></td>
                        <td th:text="${#numbers.formatDecimal(item.donGia,0,'COMMA',0,'POINT')} + ' ₫'"></td>
                        <td th:text="${item.qty}"></td>
                        <td th:text="${#numbers.formatDecimal(item.donGia.multiply(T(java.math.BigDecimal).valueOf(item.qty)),0,'COMMA',0,'POINT')} + ' ₫'"></td>
                        <td>
                            <a th:href="@{/cart/remove/{id}(id=${item.maSP})}" class="btn btn-sm btn-outline-danger">
                                <i class="bi bi-trash"></i> Xóa
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <div class="text-end mt-3">
                    <h5>Tổng cộng:
                        <span class="text-danger fw-bold"
                              th:text="${#numbers.formatDecimal(total,0,'COMMA',0,'POINT')} + ' ₫'"></span>
                    </h5>
                    <a th:href="@{/checkout}" class="btn btn-success mt-3">
                        <i class="bi bi-credit-card"></i> Thanh toán
                    </a>
                </div>
            </div>

        </div>
    </div>

</th:block>
</html>
